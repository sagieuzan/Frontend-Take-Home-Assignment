<div class="container fade-in">
    <div class="list-header">
        <div>
            <h1>Products</h1>
            <p class="subtitle">Manage and browse your catalog</p>
        </div>
        @if (!loading) {
        <div class="stats">
            {{ productCount }} products found
        </div>
        }
    </div>

    <app-product-filters [initialFilters]="currentFilters"
        (filtersChanged)="onFiltersChanged($event)"></app-product-filters>

    @if (loading) {
    <app-loading-spinner></app-loading-spinner>
    }

    @if (error && !loading) {
    <app-error-message [message]="error!" (retry)="loadProducts()">
    </app-error-message>
    }

    @if (!loading && !error) {
    <div class="product-grid">
        @for (product of products; track product.id) {
        <app-product-card [product]="product"></app-product-card>
        } @empty {
        <app-empty-state></app-empty-state>
        }
    </div>
    }

    <!-- Pagination -->
    @if (totalPages > 1 && !loading && !error) {
    <div class="pagination">
        <button class="btn-page" [disabled]="currentPage === 1" (click)="onPageChange(currentPage - 1)">
            Previous
        </button>

        <div class="page-numbers">
            @for (page of pages; track page) {
            <button class="btn-page" [class.active]="page === currentPage" (click)="onPageChange(page)">
                {{ page }}
            </button>
            }
        </div>

        <button class="btn-page" [disabled]="currentPage === totalPages" (click)="onPageChange(currentPage + 1)">
            Next
        </button>
    </div>
    }
</div>